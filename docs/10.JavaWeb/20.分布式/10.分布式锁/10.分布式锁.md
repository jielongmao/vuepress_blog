---
title: 分布式锁
date: 2022-12-12 20:16:21
permalink: /pages/dfa0c6/
categories:
  - JavaWeb
  - 分布式
tags:
  - 分布式锁
author: 
  name: jielongmao
  link: https://github.com/jielongmao
---
# 分布式锁

## 什么是分布式锁？解决什么问题？

简单总结：分布式锁，即分布式系统中的锁。在分布式系统中常常会出现**多个进程请求同一资源**的情况为了解决这个问题，引入锁，引入锁主要目的是为了在分布式系统中**控制共享资源访问**

当多个进程在同一个系统中，用分布式锁控制多个进程对资源的访问

## 分布式锁应用的场景

（1）传统的单体应用单机部署情况下，可以使用java并发处理相关的API进行互斥控制

（2）分布式系统由于多线程，多进程分布在不同机器上，使单体机器部署情况下的并发控制锁策略失效，为了解决跨JVM互斥机制来控制资源的访问，这就是分布式锁的来源；分布式锁应用场景大都是高并发，大流量场景。

## 分布式的锁的实现方式

### 基于Mysq分布式锁实现

### 基于Redis分布式锁的实现

基于redisson对redis分布式锁的实现；

（1）加锁机制：根据hash节点选择一个客户执行lua脚本

（2）锁互斥机制：再来一个客户端执行同样的lua脚本会提示已经存在锁，然后进入循环一致尝试加锁

（3）可重入机制

（4）watch dog自动延期机制

（5）释放锁机制

### 基于Zookeeper分布式锁的实现

### 基于Etcd分布式锁的实现
